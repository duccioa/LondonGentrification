<!DOCTYPE html>
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="chrome=edge"> 
		<title>London Gentrification</title>
		<link rel="stylesheet" type="text/css" href="./css/style.css" />

	</head>
<body>
<iframe width="800" height="500" frameborder="0" src="http://pythontutor.com/iframe-embed.html#code=import+geopandas+as+gp%0Aimport+pandas+as+pd%0Aimport+numpy+as+np%0Afrom+py_functions+import+color_assign+as+ca%0A%23+Add+all+the+relevant+features+to+the+wards+shapefile+and+export+it+to+GeoJson+for+the+visualisation+on+ggoglemap%0Awards%3Dgp.GeoDataFrame.from_file(%22./Data/ESRI/Simplified/London_Ward_CityMerged_WGS84.shp%22%29+%23from+shapefile+to+GeoDataFrame%0Aincome+%3D+pd.read_csv(%22./Data/modelled-household-income-estimates-wards.csv%22%29%0Aincome_sub+%3D+income%5B%5B'Code',+'Ward+name',+'LAD+code',+'Borough',+'Median+2012_13'%5D%5D%0A%0A%23Replace+these+two+lines+with+the+assign_color+function+when+it+works%0Aincome_col+%3D+pd.read_csv('./Data/claire_ward_variables.csv'%29%0Aincome_col.drop(%5B'Ward+Name',+'Median+Income+2012_13',+'Income+Category'%5D,+axis%3D1,+inplace%3DTrue%29%0A%23%0A%0Amed_income+%3D+np.median(income_sub%5B'Median+2012_13'%5D%29%0Aincome_lab+%3D+%5B%5D%0Afor+i+in+range(len(income_sub%29%29%3A%0A++++if+income_sub%5B'Median+2012_13'%5D%5Bi%5D+%3C%3D+med_income%3A%0A++++++++lab+%3D+'LOW'%0A++++else%3A%0A++++++++lab+%3D+'HIGH'%0A++++income_lab.append(lab%29%0A%0Am+%3D+pd.merge(left%3Dwards,right%3Dincome_sub,+left_on%3D'GSS_CODE',+right_on%3D'Code'%29%0Am+%3D+pd.merge(left%3Dm,+right%3Dincome_col,+left_on%3D'GSS_CODE',+right_on+%3D+'Code'%29%0A%0Adf+%3D+gp.GeoDataFrame(%7B'GSS_code'%3Am%5B'GSS_CODE'%5D,%0A++++++++++++++++++++++'LB_GSS_Code'%3Am%5B'LB_GSS_CD'%5D,%0A++++++++++++++++++++++'WardName'%3Am%5B'NAME'%5D,%0A++++++++++++++++++++++'BoroughName'%3Am%5B'BOROUGH'%5D,%0A++++++++++++++++++++++'MedianIncome_2012_13'%3Am%5B'Median+2012_13'%5D,%0A++++++++++++++++++++++'IncomeLabel'%3Aincome_lab,%0A++++++++++++++++++++++'Area_Km2'%3Around(m%5B'HECTARES'%5D/100,2%29,%0A++++++++++++++++++++++'geometry'%3A+m%5B'geometry'%5D,%0A++++++++++++++++++++++'MedianIncome_col'%3A+m%5B'Income+Colour'%5D%7D,+index%3Drange(len(m%29%29%29%0A%0Adf.to_csv('./Data/WardsIncome.csv',+index%3DFalse,+index_label%3DTrue%29%0A%0A%23+DEBUG+the+function%0A%23df%5B'Income+Color'%5D+%3D+df.apply(lambda+row%3A+ca.color_assign(row,+df%5B'MedianIncome_2012_13'%5D,+'MedianIncome_2012_13'%29,+axis%3D1%29%0A%0Adf%5B'geometry'%5D+%3D+gp.GeoSeries(df%5B'geometry'%5D%29+%23+Reconvert+the+geometry+due+to+a+bug%0A%0Ageo_wards+%3D+df.to_json(%29%0Astring+%3D+open(%22./Data/ESRI/Simplified/London_Ward_CityMerged_WGS84.geojson%22,+%22w%22%29%0Astring.write(geo_wards%29%0Astring.close(%29%0Astring+%3D+open(%22./API/data/geo/London_Ward_CityMerged_WGS84.geojson%22,+%22w%22%29%0Astring.write(geo_wards%29%0Astring.close(%29&origin=opt-frontend.js&cumulative=false&heapPrimitives=false&textReferences=false&py=2&rawInputLstJSON=%5B%5D&curInstr=0&codeDivWidth=350&codeDivHeight=400"> </iframe>
</div>		
</body>
</html>